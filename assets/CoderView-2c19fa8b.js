import{y as w,e as v,j as g,w as x,m as _,o as b,c as y,a as t,d as s,u as n}from"./index-6f97d5f0.js";import{u as C}from"./chew-7895feda.js";import{p as l,P as S}from"./prism-tomorrow-318f3136.js";import{a as V,b as j,c as k,r as P}from"./TrashIcon-c6ba9e8d.js";import"./index-3b85fe61.js";const I={class:"w-full bg-slate-900 px-5 py-3 flex justify-between"},$=t("span",{class:"ml-3"},"Code Chew 專業口香糖",-1),B={class:"flex"},E=t("div",{class:"text-white font-normal py-2 px-4 mx-1"}," 模式：JavaScript ",-1),M={__name:"CoderView",setup(G){const r=w(),i=C(),e=v(""),c=g(()=>window.innerWidth<768);function u(o){return l.highlight(o,l.languages.js)}x(e,()=>{e.value?window.onbeforeunload=()=>!0:window.onbeforeunload=null,sessionStorage.setItem("chew-content",e.value)});function m(){e.value&&!confirm("確定要離開？")||(sessionStorage.removeItem("chew-content"),r.push("/"))}function d(){e.value&&!confirm("確定要離開？")||r.replace("/writer")}function p(){e.value=""}async function f(){if(!e.value){alert("請輸入內容");return}if(!confirm("確定要送出？"))return;const o=await i.post("gum",{json:{type:"javascript",content:e.value}}).json();sessionStorage.removeItem("chew-content"),r.replace(`/result/${o._id}`)}return _(()=>{if(c.value){r.replace("/writer");return}const o=sessionStorage.getItem("chew-content");o&&(e.value=o)}),(o,a)=>(b(),y("div",null,[t("div",I,[t("button",{class:"bg-slate-900 flex hover:bg-slate-800 text-white font-normal py-2 px-4 mx-1",onClick:m},[s(n(V),{class:"h-6 w-6"}),$]),t("div",B,[E,t("button",{class:"bg-slate-900 hover:bg-slate-800 text-white font-normal py-2 px-4 mx-1",title:"一般模式",onClick:d},[s(n(j),{class:"h-6 w-6"})]),t("button",{class:"bg-slate-900 hover:bg-slate-800 text-white font-normal py-2 px-4 mx-1",title:"清空內容",onClick:p},[s(n(k),{class:"h-6 w-6"})]),t("button",{class:"bg-amber-900 hover:bg-amber-800 text-white font-normal py-2 px-4 mx-1",title:"我打完了",onClick:f},[s(n(P),{class:"h-6 w-6"})])])]),s(n(S),{class:"code-editor",modelValue:e.value,"onUpdate:modelValue":a[0]||(a[0]=h=>e.value=h),highlight:u,"line-numbers":""},null,8,["modelValue"])]))}};export{M as default};
