import{y as w,e as v,j as g,w as x,m as _,o as b,c as C,a as t,d as n,u as s}from"./index-95dfcbef.js";import{u as y}from"./chew-7895feda.js";import{p as l,P as k}from"./prism-tomorrow-2b744007.js";import{a as S,b as V,c as j,r as I}from"./TrashIcon-4b396cbd.js";import"./index-3b85fe61.js";const $={class:"w-full bg-slate-900 px-5 py-3 flex justify-between"},B=t("span",{class:"ml-3"},"Code Chew 專業口香糖",-1),E={class:"flex"},G=t("div",{class:"text-white font-normal py-2 px-4 mx-1"}," 模式：JavaScript ",-1),M={__name:"CoderView",setup(N){const r=w(),i=y(),e=v(""),c=g(()=>window.innerWidth<768);function u(o){return l.highlight(o,l.languages.js)}x(e,()=>{e.value?window.onbeforeunload=()=>!0:window.onbeforeunload=null,sessionStorage.setItem("chew-content",e.value)});function m(){e.value&&!confirm("確定要離開？")||(sessionStorage.removeItem("chew-content"),r.push("/"))}function d(){e.value&&!confirm("確定要離開？")||r.replace("/writer")}function p(){e.value=""}async function f(){if(!e.value){alert("請輸入內容");return}if(!confirm("確定要送出？"))return;const o=await i.post("gum",{json:{type:"javascript",content:e.value}}).json();sessionStorage.removeItem("chew-content"),r.replace(`/result/${o._id}`)}return _(()=>{if(c.value){r.replace("/writer");return}const o=sessionStorage.getItem("chew-content");o&&(e.value=o)}),(o,a)=>(b(),C("div",null,[t("div",$,[t("button",{class:"bg-slate-900 flex hover:bg-slate-800 text-white font-normal py-2 px-4 mx-1",onClick:m},[n(s(S),{class:"h-6 w-6"}),B]),t("div",E,[G,t("button",{class:"bg-slate-900 hover:bg-slate-800 text-white font-normal py-2 px-4 mx-1",title:"一般模式",onClick:d},[n(s(V),{class:"h-6 w-6"})]),t("button",{class:"bg-slate-900 hover:bg-slate-800 text-white font-normal py-2 px-4 mx-1",title:"清空內容",onClick:p},[n(s(j),{class:"h-6 w-6"})]),t("button",{class:"bg-amber-900 hover:bg-amber-800 text-white font-normal py-2 px-4 mx-1",title:"我打完了",onClick:f},[n(s(I),{class:"h-6 w-6"})])])]),n(s(k),{class:"code-editor",modelValue:e.value,"onUpdate:modelValue":a[0]||(a[0]=h=>e.value=h),highlight:u,"line-numbers":""},null,8,["modelValue"])]))}};export{M as default};
